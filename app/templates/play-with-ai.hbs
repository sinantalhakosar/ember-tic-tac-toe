{{#if this.loading}}
    <Common::Loader @text="Thinking..."/>
{{/if}}

<div class="flex justify-evenly items-center mt-10">
  <Play::Scores @scoreX={{this.scores.X}} @scoreO={{this.scores.O}} />

  {{#if (or (eq this.isDrawDialogOpen null) (eq this.isWinDialogOpen null))}}
    <div class="flex justify-center mt-5">
      <button
        class="block py-2 px-3 text-xl text-white rounded bg-sky-800"
        data-testid="new-game"
        type="button"
        {{on "click" this.newGameAction}}
      >
        New Game
      </button>
    </div>
  {{else}}
    <Play::Turn @turn={{this.turn}} />
  {{/if}}
</div>

<div class="w-4/12 grid grid-cols-3 gap-4 m-auto pt-10" data-testid="board">
  {{#each this.board as |item|}}
    <Play::Square
      @initialValue={{item.value}}
      @turn={{this.turn}}
      @index={{item.index}}
      @winningSquare={{includes item.index this.winIndexes}}
      @disabled={{or
        (eq this.isWinDialogOpen null)
        (eq this.isDrawDialogOpen null)
      }}
      @onClick={{this.onSquareClick}}
    />
  {{/each}}
</div>

{{#if this.isWinDialogOpen}}
  <Common::Dialog
    @primaryActionText="New game"
    @primaryAction={{this.newGameAction}}
    @onClose={{this.closeWinDialog}}
  >
    <div class="flex flex-col items-center gap-5">
      <IconifyIcon @icon="game-icons:party-popper" width="48" height="48" />
      <h1>Player {{if this.turn "O" "X"}} win this game!</h1>
    </div>
  </Common::Dialog>
{{/if}}

{{#if this.isDrawDialogOpen}}
  <Common::Dialog
    @primaryActionText="New Game"
    @primaryAction={{this.newGameAction}}
    @onClose={{this.closeDrawDialog}}
  >
    <div class="flex flex-col items-center gap-5">
      <IconifyIcon @icon="mdi:equal" width="48" height="48" />
      <h1>No one wins!</h1>
    </div>
  </Common::Dialog>
{{/if}}